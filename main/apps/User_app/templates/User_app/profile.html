<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Profile</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" media="all" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static 'User_app/profile.css' %}">
    <script type="text/javascript" src="{% static 'User_app/profile.js'%}"></script>

  </head>
  <body>
    <div class="search-bar">
      <a href="/">Home</a>
      {% if request.session.user %}
      <a href="/logout">Logout</a>
      {% endif %}
      <div class="ui-widget">
        <form class="" action="/searchUsers" method="post">
          {% csrf_token %}
          <label for="places">Search People: </label>
          <input name="person" id="places">
          <input type="submit" name="search" value="Search">
        </form>
      </div>

    </div>
    <div class="userPage">
      <div class="profPic">
        <img id="proImg" src="{{profile_picture}}">
        <p id="editProf">Edit</p>

      </div>
      {% if profile_picture %}
      <div id="picDiv" style="display:none;">
        <form class=""  action="/editProfilePicture" enctype="multipart/form-data" method="post">
          {% csrf_token %}
          <input type="file" name="myfile">
          <input type="submit" name="" value="Edit">
        </form><br>

      </div>
      {% else %}
      <input id="newProf" type="button" name="answer" value="New Profile Picture" />
      <div id="picDiv" style="display:none;">
        <form class=""  action="/newProfilePicture" enctype="multipart/form-data" method="post">
          {% csrf_token %}
          <input type="file" name="myfile">
          <input type="submit" name="" value="Add">
        </form><br>

      </div>
      {% endif %}
      <!-- <img src="{% static "User_app/blankUser.png" %}" width="150" height="150"/> -->
      <h1>{{ user.first_name}} {{user.last_name}}</h1>
      <div class="list-buttons">

        <div class="list" id="list-1">
          <h3>Followers</h3>
          <p>{{followers.count}}</p>
        </div>
        <div class="list" id="list-2">
          <h3>Following</h3>
          <p>{{following.count}}</p>
        </div>
        <div class="list" id="list-3">
          <h3>Reviews</h3>
          <p>{{length}}</p>
        </div>
      </div>


<!--
      {% if request.session %}
      {% if myFollow == "you don't follow" %}
      <a href="/connect/add/{{user.id}}"><button type="button" name="button">Follow</button></a><br>
      {% else %}
      <a href="/connect/remove/{{user.id}}"><button type="button" name="button">Unfollow</button></a><br>
      {% endif %}
      {% endif %} -->
      <div class="followers">


      </div>

    </div>
    <div class="profileInfo">



      <!-- <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="myfile">
        <button type="submit">Upload</button>
      </form> -->

      {% if profile %}
      {% for item in profile %}
      <svg class="icon icon-pencil"><use xlink:href="#icon-pencil"></use></svg>
      <symbol id="icon-pencil" viewBox="0 0 32 32">
        <title>pencil</title>
        <path d="M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2 23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z"></path>
      </symbol>
      <input id="editPro" type="button" name="answer" value="Edit Profile" />
      <div id="profileDiv" style="display:none;">
        <form class="" action="/editProfile" method="post">
          <!-- <button type="submit">Upload</button> -->
          {% csrf_token %}
          Birthday:
          <input type="date" name="birthday" value="{{item.birthday}}">
          Hometown:
          <input type="text" name="hometown" value="{{item.hometown}}">
          Country:
          <input type="text" name="country" value="{{item.country}}">
          <input type="submit" name="" value="Submit">
        </form>

      </div>
      <h3>Contact Information</h3>
      <p>Email:  {{ item.user_id.email}}</p>
      <h3>General Information</h3>
      <p>Birthday: {{item.birthday}}</p>
      <p>Hometown: {{item.hometown}}</p>
      <p>Country: {{item.country}}</p>
      {% endfor %}
      {% else %}

      <input id="newPro" type="button" name="answer" value="Create Profile" onclick="showDiv()" />

      <div id="profileDiv" style="display:none;">
        <form class="" action="/createProfile" method="post">
          <!-- <button type="submit">Upload</button> -->
          {% csrf_token %}
          Birthday:
          <input type="date" name="birthday" value="">
          Hometown:
          <input type="text" name="hometown" value="">
          Country:
          <input type="text" name="country" value="">
          <input type="submit" name="" value="Submit">
        </form>

      </div>
      {% endif %}
      {% if uploaded_file_url %}
        <p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
      {% endif %}

    </div>

    <div class="movieList">
      <h2>Movie List</h2>

    </div>
    <div class="pageFeed">

      <div class="reviewFeed">
        <h3>{{user.first_name}}'s Reviews</h3>

          {% for review in reviews %}
          <div class="reviewDiv">
            <img src="https://image.tmdb.org/t/p/w500/{{review.poster_path}}" >
            <h3>{{review.score}}</h3>
            <h3>{{review.title}}</h3>
            <p>{{review.content}}</p>

          </div>
          {% endfor %}



      </div>
      <div class="followerFeed" style="display:none">
        <h3>{{user.first_name}}'s Followers</h3>
        {% for follower in followers %}
        {% if follower.current_user.id == request.session.user %}
        <div class="followerDiv">
          <img src="{% static "User_app/blankUser.png" %}" width="50" height="50"/>
            <a href="/profile">{{follower.current_user.first_name}} {{follower.current_user.last_name}}</a>
            <p>(You)</p>

        </div>

        {% else %}

        <div class="followerDiv">
          <img src="{% static "User_app/blankUser.png" %}" width="50" height="50"/>
          <a href="/user/{{ follower.current_user.id }}">{{follower.current_user.first_name}} {{follower.current_user.last_name}}</a>

        </div>
        {% endif %}
        {% endfor %}

      </div>
      <div class="followingFeed" style="display:none">
        <h3>{{user.first_name}}'s Following</h3>
        {% for follow in following %}
        {% if follow.id == request.session.user %}
        <div class="followingDiv">
          <img src="{% static "User_app/blankUser.png" %}" width="50" height="50"/>
          <a href="/profile">{{follow.first_name}} {{follow.last_name}}</a>
          <p>(You)</p>
        </div>
        {% else %}
        <div class="followingDiv">
          <img src="{% static "User_app/blankUser.png" %}" width="50" height="50"/>
          <a href="/user/{{ follow.id }}">{{follow.first_name}}</a>

        </div>
        {% endif %}
        {% endfor %}



      </div>

    </div>
















    <!-- <div class="followers">
      <h2>Following</h2>
      {% for follow in following %}
      <div class="">
        <img src="{% static "User_app/blankUser.png" %}" width="50" height="50"/>
        <a href="/user/{{ follow.id }}">{{follow.first_name}}</a>

      </div>
      {% endfor %}

      <h2>Followers</h2>
      {% for follower in followers %}
      <div class="">
        <img src="{% static "User_app/blankUser.png" %}" width="50" height="50"/>
        <a href="/user/{{ follower.current_user.id }}">{{follower.current_user.first_name}}</a>

      </div>
      {% endfor %}


    </div> -->
    <!-- <div class="watch-list">
      <h2>Watchlist</h2>
        {% for movie in watchlist %}
        <p>--------------------------</p>
        <p>{{ movie.movie_title }}</p>
        <a href="movie/delete/watchlist/{{movie.id}}">Delete</a>
        <p>--------------------------</p>
        {%endfor%}
    </div> -->






  </body>
</html>
